<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport"
		content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Intranet Drotium">
	<meta name="author" content="Alejandro Campos - Drotium">
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
	
	<title>Drotium Intranet</title>
	<link th:href="@{/libs/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
	<link th:href="@{/libs/mdb/css/mdb.min.css}" rel="stylesheet">
</head>
<body>
	<th:block th:switch="${file.format}">
		<div id="odf"></div>
		<div th:remove="tag" th:case="'pdf'">
			<iframe style="width:100%; height:100%; position:absolute;" th:if="${file.format} == 'pdf'" th:src="@{'/js/pdf/web/viewer.html?file=/user/download/file/' + ${file.encrypt()}}"></iframe>
		</div>
		<div th:remove="tag" th:case="*">
			<div th:if="${not #lists.isEmpty(content)}" class="container m-0">
				<th:block th:each="line, i: ${content}">
					<div>
						<small class="mr-4"><strong th:text="${i.index} + ':'"></strong></small>
						<p class="d-inline mb-0" th:utext="${line}"></p>
					</div>
				</th:block>
			</div>
			<div th:if="${#lists.isEmpty(content)}" class="container">
				<div class="alert alert-danger m-3 text-center">
					<span>Its an empty file</span>
				</div>
			</div>
		</div>
	</th:block>

	<!-- Bootstrap core JavaScript-->
	<script th:src="@{/libs/jquery/jquery.min.js}"></script>
	<script th:src="@{/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/libs/mdb/js/mdb.min.js}"></script>
	<script th:if="${file.format == 'doc' or file.format == 'docx'}" th:src="@{/js/word/webodf.js}" type="text/javascript"></script>
	<script th:if="${file.format == 'doc' or file.format == 'docx'}" th:inline="javascript">
		/*<![CDATA[*/
			function init() {
				var odfelement = document.getElementById("odf"),
			    	odfcanvas = new odf.OdfCanvas(odfelement);
				odfcanvas.load(/*[[@{'/user/download/file/' + ${file.encrypt()}}]]*/);
			}
			window.setTimeout(init, 0);
		/*]]>*/
	</script>
</body>
</html>
